<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="../../resources/css/styles.css" />
		<title>02 | AJAX JSON File Request</title>
	</head>

	<body>
		<div class="header">
			<h1>AJAX JSON File Request</h1>
		</div>
		<button id="button">Get Response</button>
		<script>
			//-------------------------------------------------------------------------------------------------------
			const myButton = document.getElementById("button");
			myButton.addEventListener("click", jsonRequest);

			function jsonRequest() {
				// Create a new XMLHttprequest object:
				let xhr = new XMLHttpRequest();

				// Fetching data using .open() appended to the XMLHttprequest object:
				// Params = 1. Request type, 2. Request URL/File directory, 3. Asychronous boolean)
				xhr.open("GET", "./json-info.json", true);

				xhr.onload = function () {
					if (xhr.status == 200) {
						// Converting the xhr.response from JSON format into a JavaScript object:
						let responseString = JSON.parse(xhr.responseText);
						for (x in responseString) {
							console.log(x + ": " + responseString[x]);
						}
					} else {
						console.log("Error 404: JSON file not found!");
					}
				};

				//Send AJAX request using the the XMLHttprequest object with the .send() method appended:
				xhr.send();
			}
			//-------------------------------------------------------------------------------------------------------
		</script>
	</body>
</html>
