<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="../css/styles.css" />
		<title>04 | Async/Await</title>
	</head>

	<body>
		<div class="header"><h1>Async/Await</h1></div>
		<div id="output"></div>
		<script>
			//-------------------------------------------------------------------------------------------------------
			const posts = [
				{ title: "Post 01", body: "This is my first post." },
				{ title: "Post 02", body: "This is my second post." },
			];

			function getPosts() {
				setTimeout(() => {
					let output = "";
					posts.forEach((post) => {
						output += `<li>${post.title}</li>`;
					});
					document.getElementById("output").innerHTML = output;
				}, 1000); // Function will execute after 1 second (1000 milliseconds)
			}

			function createPost(post) {
				return new Promise((resolve, reject) => {
					setTimeout(() => {
						posts.push(post);

						const error = false;

						if (!error) {
							resolve();
						} else {
							reject("Something went very wrong!");
						}
					}, 2000);
				});
			}

			newPost = { title: "Post 03", body: "This is my third post." };

			async function init() {
				await createPost(newPost);

				getPosts();
			}

			init();
			//-------------------------------------------------------------------------------------------------------
		</script>
	</body>
</html>
